<UserControl
    x:Class="Plantech.Bim.PhaseVisualizer.UI.PhaseVisualizerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel
            Grid.Row="0"
            Margin="0,0,0,4">
            <DockPanel Margin="0,0,0,3">
                <TextBlock
                    DockPanel.Dock="Left"
                    Margin="0,0,6,0"
                    VerticalAlignment="Center"
                    Text="Preset:" />
                <Button
                    DockPanel.Dock="Right"
                    Width="70"
                    Margin="6,0,0,0"
                    Click="DeletePreset_Click"
                    Content="Delete" />
                <Button
                    DockPanel.Dock="Right"
                    Width="70"
                    Margin="6,0,0,0"
                    Click="SavePreset_Click"
                    Content="Save" />
                <Button
                    DockPanel.Dock="Right"
                    Width="70"
                    Margin="6,0,0,0"
                    Click="LoadPreset_Click"
                    Content="Load" />
                <ComboBox
                    x:Name="PresetNameComboBox"
                    MinWidth="220"
                    MaxWidth="380"
                    VerticalAlignment="Center"
                    IsEditable="True"
                    ItemsSource="{Binding PresetNames}"
                    Text="{Binding PresetName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </DockPanel>

            <DockPanel LastChildFill="False">
                <Grid
                    DockPanel.Dock="Right"
                    VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <StackPanel
                        Grid.Column="0"
                        Orientation="Horizontal"
                        VerticalAlignment="Center">
                        <CheckBox
                            x:Name="ShowAllPhasesToggle"
                            Margin="0"
                            VerticalAlignment="Center"
                            IsChecked="{Binding ShowAllPhases, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            Checked="ShowAllPhasesToggle_Changed"
                            Unchecked="ShowAllPhasesToggle_Changed" />
                        <TextBlock
                            Margin="4,0,0,0"
                            VerticalAlignment="Center"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="#FF374151"
                            Text="Show all phases" />
                    </StackPanel>

                    <StackPanel
                        Grid.Column="2"
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        >
                        <CheckBox
                            x:Name="SearchScopeToggle"
                            Margin="0"
                            VerticalAlignment="Center"
                            IsChecked="{Binding UseVisibleViewsForSearch, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            Checked="SearchScopeToggle_Changed"
                            Unchecked="SearchScopeToggle_Changed" />
                        <TextBlock
                            Margin="4,0,0,0"
                            VerticalAlignment="Center"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="#FF374151"
                            Text="Search in visible views" />
                    </StackPanel>
                </Grid>
            </DockPanel>
        </StackPanel>

        <DataGrid
            x:Name="RowsGrid"
            Grid.Row="1"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            CanUserDeleteRows="False"
            IsReadOnly="False"
            SelectionMode="Extended"
            SelectionUnit="FullRow" />

        <StackPanel
            Grid.Row="2"
            Margin="0,10,0,0"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <Button
                Width="100"
                Margin="0,0,8,0"
                Click="OpenLog_Click"
                Content="Open Log" />
            <Button
                Width="100"
                Margin="0,0,8,0"
                Click="Refresh_Click"
                Content="Refresh" />
            <Button
                Width="100"
                Margin="0,0,8,0"
                Click="Apply_Click"
                Content="Apply" />
            <Button
                Width="100"
                Click="Close_Click"
                Content="Close" />
        </StackPanel>

        <Border
            Grid.Row="3"
            Margin="0,8,0,0"
            Padding="8,4"
            BorderBrush="#FFD0D0D0"
            BorderThickness="1"
            CornerRadius="2">
            <TextBlock
                VerticalAlignment="Center"
                FontSize="12"
                Text="{Binding StatusText}"
                TextTrimming="CharacterEllipsis" />
        </Border>
    </Grid>
</UserControl>
